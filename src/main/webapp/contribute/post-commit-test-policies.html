---
title: Contribute | Post-commit test policies
description: "Learn about Apache Unomi post-commit test policies and requirements."
keywords: "Apache Unomi testing, post-commit tests, test policies, CI testing, quality assurance"
layout: default
---

<section class="page-header">
    <div class="container">
        <p class="section-label text-hero-label">Contribute</p>
        <h1>Post-commit tests policies</h1>
    </div>
</section>

<section class="section">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-3">
                <div class="sidenav-menu">
                    <div class="menu-title">Contribute</div>
                    <ul class="list-unstyled mb-3">
                        <li><a href="index.html">Getting Started</a></li>
                    </ul>
                    <div class="menu-title mt-3">Technical Docs</div>
                    <ul class="list-unstyled mb-3">
                        <li><a href="testing.html">Testing Guide</a></li>
                        <li><a href="dependencies-guide.html">Dependencies Guide</a></li>
                    </ul>
                    <div class="menu-title mt-3">Policies</div>
                    <ul class="list-unstyled mb-3">
                        <li><a href="pre-commit-test-policies.html">Pre-commit Policies</a></li>
                        <li><a href="post-commit-test-policies.html" class="active">Post-commit Policies</a></li>
                    </ul>
                    <div class="menu-title mt-3">Committers</div>
                    <ul class="list-unstyled mb-0">
                        <li><a href="become-a-committer.html">Become a Committer</a></li>
                        <li><a href="committer-guide.html">Committer Guide</a></li>
                        <li><a href="release-guide.html">Release Guide</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-9">
            <p>Post-commit tests validate that Unomi works correctly in a live environment. The tests also catch errors that are hard to predict in the design and implementation stages</p>

            <p>Even though post-commit tests run after the code is merged into the repository,  it is important that the tests pass reliably. Jenkins executes post-commit tests against the HEAD of the master branch. If post-commit tests fail, there is a problem with the HEAD build. In addition, post-commit tests are time consuming to run, and it is often hard to triage test failures.</p>

            <h3>Policies</h3>

            <p>To ensure that Unomi's post-commit tests are reliable and healthy, the Unomi community follows these post-commit test policies:</p>

            <ul>
              <li><a href="post-commit-policies-details.html#rollback_first">Rollback first</a></li>
              <li><a href="post-commit-policies-details.html#failing_test_is_critical_bug">A failing test is a critical bug</a></li>
              <li><a href="post-commit-policies-details.html#flake_is_failing">A flaky test is a critical bug</a></li>
              <li><a href="post-commit-policies-details.html#remove_flake">Flaky tests must either be fixed or removed</a></li>
              <li><a href="post-commit-policies-details.html#precommit_for_postcommit">Fixes for post-commit failures should include a corresponding new pre-commit test</a></li>
            </ul>

            <h3>Post-commit test failure scenarios</h3>

            <p>When a post-commit test fails, follow the provided steps for your situation.</p>

            <h4>I found a test failure</h4>

            <ol>
              <li>Create a <a target="_blank" rel="noopener" href="https://issues.apache.org/jira/issues/?jql=project%20%3D%20UNOMI%20AND%20component%20%3D%20test-failures">JIRA issue</a> and assign it to yourself.</li>
              <li>Do high level triage of the failure.</li>
              <li><a href="post-commit-guides.html#find_specialist">Assign the JIRA issue to a relevant person</a>.</li>
            </ol>

            <h4>I was assigned a JIRA issue for a test failure</h4>

            <ol>
              <li><a href="post-commit-guides.html#rollback">Rollback the culprit change</a>.</li>
              <li>If you determine that rollback will take longer than 8 hours, <a href="post-commit-guides.html#disabling">disable the test temporarily</a> while you rollback or create a fix.</li>
            </ol>

            <blockquote>
              <p>Note: Rollback is always the first course of action. If a fix is trivial, open a pull request with the proposed fix while doing rollback.</p>
            </blockquote>

            <h4>My change was rolled back due to a test failure</h4>

            <ol>
              <li>Look at the JIRA issue to find the reason for the rollback.</li>
              <li>Fix your code and re-run the post-commit tests.</li>
              <li>Implement new pre-commit tests that will catch similar bugs before future code is merged into the repository.</li>
              <li>Open a new PR that contains your fix and the new pre-commit tests.</li>
            </ol>

            <h3>Useful links</h3>

            <ul>
              <li><a href="testing.html#best_practices">Best practices for writing tests</a></li>
            </ul>
            </div>
        </div>
    </div>
</section>
